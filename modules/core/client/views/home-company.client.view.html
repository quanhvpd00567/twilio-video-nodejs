<section class="content container-fluid">
  <!-- events opening -->
  <div class="row">
    <div class="col-xs-12 mg10b">
      <h4 class="home_subtitle">
        {{'home.company.event_opening.subtitle' | translate}}
      </h4>
    </div>

    <div class="col-xs-12 text-center" ng-if="!vm.eventsOpening">
      <span>{{'home.company.event_opening.no_data' | translate}}</span>
    </div>

    <div class="col-xs-12 mg10b" ng-if="vm.eventsOpening">
      <div class="table-responsive table-list">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th class="w150">{{'home.company.event_opening.event_name.label' | translate}}</th>
              <th class="text-center w200">{{'home.company.event_opening.period.label' | translate}}</th>
              <th class="text-right w100">
                {{'home.company.event_opening.number_of_participants.label' | translate}}
              </th>
              <th class="text-right w100">
                {{'home.company.event_opening.total_steps.label' | translate}}
              </th>
              <th class="text-right w100">{{'home.company.event_opening.average_steps.label' | translate}}
              </th>
              <th class="text-right w100">
                {{'home.company.event_opening.estimated_donation_amount.label' | translate}}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td ng-bind="vm.eventsOpening.event.event_name">
              </td>
              <td class="text-center">{{vm.eventsOpening.event.start | dateTimeNormal}} - {{vm.eventsOpening.event.end |
                dateTimeNormal}}</td>
              <td class="text-right" ng-bind="vm.eventsOpening.event.numberOfParticipants | format_person">
              </td>
              <td class="text-right" ng-bind="vm.eventsOpening.event.totalSteps | format_step">
              </td>
              <td class="text-right" ng-bind="vm.eventsOpening.event.averageSteps | format_step">
              </td>
              <td class="text-right" ng-bind="vm.eventsOpening.event.estimatedDonationAmounts | format_money">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- comproject -->
    <div class="col-xs-12 mg10b" ng-if="vm.eventsOpening">
      <div class="row">
        <div class="col-xs-12">
          <h4>{{'home.company.event_opening.project.subtitle' | translate}}</h4>
        </div>

        <div class="col-xs-12 mg10b" ng-repeat="item in vm.eventsOpening.comprojects track by $index">
          <div class="row" style="margin: 0px; border: 1px solid #ccc; padding: 15px 0px;">
            <div class="col-xs-3">
              <div style="margin-left: auto;margin-right: auto;">
                <div class="panel-default text-center" style="margin-bottom: 0px;">
                  <img class="img-responsive clickable" style="max-height: 180px; display: unset;"
                    src="{{getImageDefault(item.project.image)}}"
                    ng-click="handleShowImage(getImageDefault(item.project.image))">
                </div>
              </div>
            </div>
            <div class="col-xs-9">
              <div class="mg10b" style="font-size: 18px;"><strong>{{item.project.name}}</strong></div>
              <div class="mg10b"><strong>{{'event.project_search.project_description.label' | translate}}</strong>
              </div>
              <div class="word-break break-line" ng-bind-html="item.project.description | myParseUrl"></div>

              <div class="text-right mg10t" style="border: 1px solid #ccc;padding: 10px;">
                <span style="margin-right: 15px;">
                  <span>{{'home.company.event_opening.project.number_of_supporters.label' |
                    translate}}</span>&nbsp<span>{{item.numberOfParticipants | format_person}}</span>
                </span>
                <span style="margin-right: 15px;">
                  <span>{{'home.company.event_opening.project.total_steps.label' |
                    translate}}</span><span>{{item.totalSteps | format_step}}</span>
                </span>
                <span>
                  <span>{{'home.company.event_opening.project.estimated_donation_amount.label' |
                    translate}}</span><span>{{item.estimatedDonationAmounts | format_money}}</span>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- subsidiaries -->
    <div class="col-xs-12" ng-if="vm.eventsOpening">
      <div class="row">
        <div class="col-xs-12">
          <h4>{{'home.company.event_opening.subsidiary.subtitle' | translate}}</h4>
        </div>
      </div>
      <div class="table-responsive table-list">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th class="w200">{{'home.company.event_opening.subsidiary.list.table.header.name.label' |
                translate}}</th>
              <th class="text-right w100">
                {{'home.company.event_opening.subsidiary.list.table.header.number_of_participants.label' | translate}}
              </th>
              <th class="text-right w100">
                {{'home.company.event_opening.subsidiary.list.table.header.total_steps.label' | translate}}
              </th>
              <th class="text-right w100">
                {{'home.company.event_opening.subsidiary.list.table.header.average_steps.label' |
                translate}}
              </th>
              <th class="text-right w100">
                {{'home.company.event_opening.subsidiary.list.table.header.estimated_donation_amount.label' |
                translate}}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in vm.eventsOpening.subsidiaries">
              <td
                ng-bind="item.name | get_company_name :item.kind :masterdata.company_name_affix :masterdata.COMPANY_KIND">
              </td>
              <td class="text-right" ng-bind="item.numberOfParticipants | format_person">
              </td>
              <td class="text-right" ng-bind="item.totalSteps | format_step">
              </td>
              <td class="text-right" ng-bind="item.averageSteps | format_step">
              </td>
              <td class="text-right" ng-bind="item.estimatedDonationAmounts | format_money">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- events finished -->
  <div class="row mg30t">
    <div class="col-xs-12">
      <h4 class="home_subtitle">
        {{'home.company.event_finished.subtitle' | translate}}
      </h4>
    </div>
    <div class="col-xs-12">
      <div class="title-group">
        <p class="mgn title-group__inline-title">
          {{ tableReport(vm.conditionForEventsFinished) }}
        </p>
      </div>
    </div>
    <div class="col-xs-12">
      <div class="table-responsive table-list">
        <table class="table table-bordered table-hover">
          <thead>
            <tr>
              <th class="col-index">#</th>
              <th class="w150">{{'home.company.event_finished.list.table.header.event_name.label' | translate}}
              </th>
              <th class="text-center w200">{{'home.company.event_finished.list.table.header.period.label' | translate}}
              </th>
              <th class="text-left w100"
                tbtitle="{{'home.company.event_finished.list.table.header.municipality_name.label' | translate}}"
                tbmodel="municipality_name" ng-click="vm.handleSortChanged('municipality_name')" table-order
                tbcondition="vm.conditionForEventsFinished"></th>
              <th class="text-right w100"
                tbtitle="{{'home.company.event_finished.list.table.header.total_steps.label' | translate}}"
                tbmodel="total_steps" ng-click="vm.handleSortChanged('total_steps')" table-order
                tbcondition="vm.conditionForEventsFinished"></th>
              <th class="text-right w100"> {{'home.company.event_finished.list.table.header.average_steps.label' |
                translate}}</th>
              <th class="text-right w100"
                tbtitle="{{'home.company.event_finished.list.table.header.donation_amount.label' | translate}}"
                tbmodel="total" ng-click="vm.handleSortChanged('total')" table-order
                tbcondition="vm.conditionForEventsFinished"></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="20" ng-show="!vm.eventsFinished || vm.eventsFinished.length === 0">
                {{'common.table.no_data_available' | translate}}
              </td>
            </tr>
            <tr ng-repeat="item in vm.eventsFinished track by $index">
              <td class="text-center">
                {{ tableIndex(vm.conditionForEventsFinished, $index) }}
              </td>
              <td ng-bind="item.event_name"></td>
              <td class="text-center">{{item.start | dateTimeNormal}} - {{item.end | dateTimeNormal}}</td>
              <td ng-bind="item.municipality_name"></td>
              <td class="text-right" ng-bind="item.total_steps | format_step">
              </td>
              <td class="text-right" ng-bind="item.average_steps | format_step">
              </td>
              <td class="text-right" ng-bind="item.total | format_money">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <uib-pagination class="mg10t" total-items="vm.conditionForEventsFinished.total"
        ng-model="vm.conditionForEventsFinished.page" max-size="5" boundary-links="true"
        items-per-page="vm.conditionForEventsFinished.limit" ng-click="vm.handlePageChanged()" previous-text="前"
        next-text="次" first-text="最初" last-text="最後">
      </uib-pagination>
    </div>
  </div>
</section>